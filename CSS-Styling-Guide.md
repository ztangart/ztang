# CSS 样式系统指南

## 1. 概述

本文档详细介绍 zt3.0 项目的 CSS 样式系统，包括文件组织结构、命名约定、模块化方法和最佳实践。本指南旨在帮助团队成员理解、使用和维护项目样式代码，避免重复定义和样式冲突。

## 2. 文件组织结构

项目样式采用模块化结构，位于 `css/` 目录下。文件命名遵循以下规则：
- 以 `_` 开头的文件为模块化文件（如 `_variables.css`、`_modal.css`）
- 不带 `_` 开头的文件为入口文件或独立使用的文件（如 `styles.css`）

### 文件结构说明：

```
css/
├── _variables.css        # CSS 变量定义
├── _base.css             # 基础样式和重置
├── _modal.css            # 模态框组件样式
├── _forms.css            # 表单组件样式
├── _buttons.css          # 按钮组件样式
├── _utilities.css        # 工具类样式
├── _responsive.css       # 响应式设计样式
└── styles.css           # 主入口文件（导入所有模块）
```

### 文件职责说明：

| 文件名 | 主要职责 | 内容说明 |
|--------|----------|----------|
| _variables.css | 定义全局变量 | 包含所有颜色、间距、边框半径等可复用变量 |
| _base.css | 基础重置和全局样式 | 包含浏览器重置、全局元素样式 |
| _modal.css | 模态框相关样式 | 实现模态框覆盖层、容器、标题等组件 |
| _forms.css | 表单相关样式 | 实现输入框、选择器、文本域等表单元素 |
| _buttons.css | 按钮相关样式 | 实现各种按钮类型和状态 |
| _utilities.css | 辅助工具类 | 提供常用的工具类，如布局、文本、间距等 |
| _responsive.css | 响应式设计 | 针对不同屏幕尺寸的响应式断点样式 |
| styles.css | 主入口文件 | 导入所有模块化文件，提供统一引用点 |

## 3. 命名约定

项目采用 BEM (Block, Element, Modifier) 命名规范，结合 CSS 变量实现一致的样式系统。

### BEM 命名格式：

```css
/* 块（Block）- 独立的组件 */
.block-name {
  /* 样式 */
}

/* 元素（Element）- 块的子部分 */
.block-name__element-name {
  /* 样式 */
}

/* 修饰符（Modifier）- 块或元素的变体 */
.block-name--modifier {
  /* 样式 */
}

.block-name__element-name--modifier {
  /* 样式 */
}
```

### 项目特定命名约定：

- 组件类名使用小写字母，单词间用连字符 `-` 分隔
- 变量名使用 `--` 前缀，单词间用连字符 `-` 分隔
- 工具类使用语义化命名，如 `.text-center`、`.p-md`
- 对于特殊组件，使用组件前缀，如 `.modal-`、`.form-`

### 兼容性支持：

为了支持旧版 HTML 代码，我们同时保留了旧版类名（如 `.btn-primary`）和新版 BEM 类名（如 `.btn--primary`）。在新代码中，应优先使用 BEM 命名规范。

## 4. CSS 变量系统

项目使用 CSS 变量实现主题一致性和易于维护。所有变量定义在 `_variables.css` 文件中。

### 变量分类：

- **颜色变量**：用于主题色调、文本颜色、背景色等
- **间距变量**：定义统一的间距单位
- **尺寸变量**：边框半径、字体大小等
- **动画变量**：过渡时间、动画参数等

### 变量使用示例：

```css
.element {
  color: var(--text-primary);
  background-color: var(--background-dark);
  margin-bottom: var(--spacing-md);
  border-radius: var(--border-radius);
  transition: var(--transition);
}
```

## 5. 模块化开发指南

### 5.1 组件开发流程

1. **确定组件需求**：明确组件功能和状态
2. **创建组件样式文件**：如果是新组件，在 `css/` 目录下创建 `_component-name.css`
3. **遵循 BEM 规范**：使用正确的 BEM 命名方式
4. **使用 CSS 变量**：优先使用已定义的 CSS 变量
5. **添加响应式样式**：在组件文件中添加基本响应式规则，复杂规则在 `_responsive.css` 中定义
6. **添加注释文档**：为组件添加头部注释和关键样式注释
7. **在主文件中导入**：在 `styles.css` 中导入新的组件文件

### 5.2 避免重复定义

为防止类似 `.modal-container` 的重复定义问题，请遵循以下原则：

1. **组件样式集中管理**：每个组件的样式应集中在一个文件中
2. **使用 CSS 变量**：颜色、尺寸等使用变量，避免硬编码
3. **样式审查**：添加新样式前，先搜索是否已有类似定义
4. **命名规范**：严格遵循 BEM 命名，避免命名冲突
5. **定期清理**：定期检查并清理未使用或重复的样式

## 6. 响应式设计

项目采用移动优先的响应式设计策略，在 `_responsive.css` 中定义了不同断点的样式。

### 断点定义：

- **移动设备**：0 - 576px
- **平板设备**：577px - 768px
- **中等屏幕**：769px - 992px
- **大屏幕**：993px - 1200px
- **超大屏幕**：1201px 及以上

### 响应式最佳实践：

1. **使用相对单位**：优先使用 `rem`、`em`、`%` 等相对单位
2. **弹性布局**：使用 Flexbox 和 Grid 实现灵活布局
3. **响应式图片**：使用 `max-width: 100%` 确保图片适应容器
4. **媒体查询**：根据断点调整布局、字体大小和间距
5. **性能优化**：避免在媒体查询中重复定义大量样式

## 7. 性能优化

### CSS 性能优化建议：

1. **减少选择器复杂度**：避免嵌套过深的选择器
2. **合理使用 !important**：尽量避免使用 `!important`，仅在必要时用于覆盖第三方样式
3. **合并相似样式**：将相似的样式规则合并，减少代码量
4. **使用 CSS 变量**：通过变量统一管理重复值
5. **避免过多动画**：合理使用动画，避免性能问题
6. **使用工具类**：通过工具类减少重复样式定义

## 8. 可访问性

### 可访问性最佳实践：

1. **颜色对比度**：确保文本与背景的对比度符合 WCAG 标准
2. **键盘导航**：确保所有交互元素可通过键盘访问
3. **语义化标记**：使用正确的 HTML 语义化标签
4. **ARIA 属性**：对复杂组件添加适当的 ARIA 属性
5. **焦点样式**：为交互元素提供明显的焦点状态样式
6. **支持高对比度模式**：在 `_responsive.css` 中提供高对比度模式支持

## 9. 维护与更新

### 定期维护任务：

1. **样式审查**：每月审查样式代码，清理重复或未使用的样式
2. **更新变量**：根据设计需求更新 CSS 变量
3. **兼容性测试**：测试不同浏览器和设备的兼容性
4. **文档更新**：及时更新此文档以反映样式系统的变化
5. **团队培训**：向团队成员介绍样式规范和最佳实践

### 添加新样式流程：

1. **检查现有样式**：搜索是否已有类似功能的样式
2. **遵循命名规范**：使用 BEM 命名规范
3. **使用 CSS 变量**：优先使用现有变量
4. **添加注释**：为新样式添加清晰的注释
5. **测试验证**：在不同设备和浏览器中测试新样式

## 10. 迁移指南

### 从旧样式迁移到新样式系统：

1. **识别旧类名**：找出使用旧类名（如 `.btn-primary`）的地方
2. **添加新类名**：同时添加新的 BEM 类名（如 `.btn--primary`）
3. **更新样式引用**：在 HTML 中更新类名引用
4. **逐步替换**：分批次替换旧类名，避免一次性修改过多代码
5. **测试验证**：每次替换后进行测试，确保样式正常

---

**文档维护者**：样式系统维护团队  
**最后更新**：2024年11月19日  
**版本**：1.0.0